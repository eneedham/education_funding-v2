
// Add the map, basemap, and attirbution
var dataLayer;
var value;
var layer;
var theVariable = "hello World";
//var url_example = 'https://eneedham-whyy.carto.com/api/v2/viz/395c5446-6573-11e6-9248-0e05a8b3e3d7/viz.json';
var url_example = 'https://eneedham-whyy.carto.com/api/v2/viz/6476f322-7561-11e6-87f4-0e3ebc282e83/viz.json';

// var css598 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentages [ totch_5_98 > 502681.2] {polygon-fill: #3a7922;}#pa_school_districts_2015_setpercentages [ totch_5_98 <= 502681.2] {polygon-fill: #3a7922;}#pa_school_districts_2015_setpercentages [ totch_5_98 <= 211208.4] {polygon-fill: #7eb669;}#pa_school_districts_2015_setpercentages [ totch_5_98 <= 125884.3] {polygon-fill: #abd69b;}#pa_school_districts_2015_setpercentages [totch_5_98 = 0] {polygon-fill: #dcdcdc;}";
// var css10 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentages [ totch_10 > 745392.85] {polygon-fill: #3a7922;}#pa_school_districts_2015_setpercentages [ totch_10 <= 745392.85] {polygon-fill: #3a7922;}#pa_school_districts_2015_setpercentages [ totch_10 <= 227083.15] {polygon-fill: #7eb669;}#pa_school_districts_2015_setpercentages [ totch_10 <= 84594.82] {polygon-fill: #abd69b;}#pa_school_districts_2015_setpercentages [ totch_10 = 0] {polygon-fill: #dcdcdc;}#pa_school_districts_2015_setpercentages [ totch_10 <= -11031.30] {polygon-fill: #9e91b1;}#pa_school_districts_2015_setpercentages [ totch_10 <= -50489.22 ] {polygon-fill: #7b6a96;}#pa_school_districts_2015_setpercentages [ totch_10 <= -100245.19] {polygon-fill: #5e497e;}";
// var css20 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentages [ totch_20 > 1630343.8] {polygon-fill: #3a7922;}#pa_school_districts_2015_setpercentages [ totch_20 <= 1630343.8] {polygon-fill: #3a7922;}#pa_school_districts_2015_setpercentages [ totch_20 <= 481323.6] {polygon-fill: #7eb669;}#pa_school_districts_2015_setpercentages [ totch_20 <= 224318.9] {polygon-fill: #abd69b;}#pa_school_districts_2015_setpercentages [ totch_20 = 0] {polygon-fill: #dcdcdc;}#pa_school_districts_2015_setpercentages [ totch_20 <= -68093.65] {polygon-fill: #9e91b1;}#pa_school_districts_2015_setpercentages [ totch_20 <= -235879.55 ] {polygon-fill: #7b6a96;}#pa_school_districts_2015_setpercentages [ totch_20 <= -454304.89] {polygon-fill: #5e497e;}";
// var css30 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentages [ totch_30 > 2601216.3] {polygon-fill: #3a7922;}#pa_school_districts_2015_setpercentages [ totch_30 <= 2601216.3] {polygon-fill: #3a7922;}#pa_school_districts_2015_setpercentages [ totch_30 <= 768322.7] {polygon-fill: #7eb669;}#pa_school_districts_2015_setpercentages [ totch_30 <= 319607.9] {polygon-fill: #abd69b;}#pa_school_districts_2015_setpercentages [ totch_30 = 0] {polygon-fill: #dcdcdc;}#pa_school_districts_2015_setpercentages [ totch_30 <= -137835.8] {polygon-fill: #9e91b1;}#pa_school_districts_2015_setpercentages [ totch_30 <= -455455.3] {polygon-fill: #7b6a96;}#pa_school_districts_2015_setpercentages [ totch_30 <= -848588.1] {polygon-fill: #5e497e;}";
// var css40 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentages [ totch_40 > 3490194.8] {polygon-fill: #3a7922;}#pa_school_districts_2015_setpercentages [ totch_40 <= 3490194.8] {polygon-fill: #3a7922;}#pa_school_districts_2015_setpercentages [ totch_40 <= 979618.4] {polygon-fill: #7eb669;}#pa_school_districts_2015_setpercentages [ totch_40 <= 413198.7] {polygon-fill: #abd69b;}#pa_school_districts_2015_setpercentages [ totch_40 = 0] {polygon-fill: #dcdcdc;}#pa_school_districts_2015_setpercentages [ totch_40 <= -238547.7] {polygon-fill: #9e91b1;}#pa_school_districts_2015_setpercentages [ totch_40 <= -700012.1] {polygon-fill: #7b6a96;}#pa_school_districts_2015_setpercentages [ totch_40 <= -1249107.6] {polygon-fill: #5e497e;}";
// var css50 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentages [ totch_50 > 4913118.3] {polygon-fill: #3a7922;}#pa_school_districts_2015_setpercentages [ totch_50 <= 4913118.3] {polygon-fill: #3a7922;}#pa_school_districts_2015_setpercentages [ totch_50 <= 1227556.3] {polygon-fill: #7eb669;}#pa_school_districts_2015_setpercentages [ totch_50 <= 539371.7] {polygon-fill: #abd69b;}#pa_school_districts_2015_setpercentages [ totch_50 = 0] {polygon-fill: #dcdcdc;}#pa_school_districts_2015_setpercentages [ totch_50 <= -281206] {polygon-fill: #9e91b1;}#pa_school_districts_2015_setpercentages [ totch_50 <= -929846] {polygon-fill: #7b6a96;}#pa_school_districts_2015_setpercentages [ totch_50 <= -1645006] {polygon-fill: #5e497e;}";
// var css60 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentages [ totch_60 > 6234985.0] {polygon-fill: #3a7922;}#pa_school_districts_2015_setpercentages [ totch_60 <= 6234985.0] {polygon-fill: #3a7922;}#pa_school_districts_2015_setpercentages [ totch_60 <= 1478686.2] {polygon-fill: #7eb669;}#pa_school_districts_2015_setpercentages [ totch_60 <= 641674.8] {polygon-fill: #abd69b;}#pa_school_districts_2015_setpercentages [ totch_60 = 0] {polygon-fill: #dcdcdc;}#pa_school_districts_2015_setpercentages [ totch_60 <= -343005.6] {polygon-fill: #9e91b1;}#pa_school_districts_2015_setpercentages [ totch_60 <= -1131314.9] {polygon-fill: #7b6a96;}#pa_school_districts_2015_setpercentages [ totch_60 <= -2044292.1] {polygon-fill: #5e497e;}";
// var css70 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentages [ totch_70 > 7373059.5] {polygon-fill: #3a7922;}#pa_school_districts_2015_setpercentages [ totch_70 <= 7373059.5] {polygon-fill: #3a7922;}#pa_school_districts_2015_setpercentages [ totch_70 <= 1777112.0] {polygon-fill: #7eb669;}#pa_school_districts_2015_setpercentages [ totch_70 <= 749226.4] {polygon-fill: #abd69b;}#pa_school_districts_2015_setpercentages [ totch_70 = 0] {polygon-fill: #dcdcdc;}#pa_school_districts_2015_setpercentages [ totch_70 <= -435465.8] {polygon-fill: #9e91b1;}#pa_school_districts_2015_setpercentages [ totch_70 <= -1360081.0] {polygon-fill: #7b6a96;}#pa_school_districts_2015_setpercentages [ totch_70 <= -2443414.9] {polygon-fill: #5e497e;}";
// var css80 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentages [ totch_80 > 8598498.5] {polygon-fill: #3a7922;}#pa_school_districts_2015_setpercentages [ totch_80 <= 8598498.5] {polygon-fill: #3a7922;}#pa_school_districts_2015_setpercentages [ totch_80 <= 2276493.9] {polygon-fill: #7eb669;}#pa_school_districts_2015_setpercentages [ totch_80 <= 879732.8] {polygon-fill: #abd69b;}#pa_school_districts_2015_setpercentages [ totch_80 = 0] {polygon-fill: #dcdcdc;}#pa_school_districts_2015_setpercentages [ totch_80 <= -509792.6] {polygon-fill: #9e91b1;}#pa_school_districts_2015_setpercentages [ totch_80 <= -1568092.3] {polygon-fill: #7b6a96;}#pa_school_districts_2015_setpercentages [ totch_80 <= -2836960.1] {polygon-fill: #5e497e;}";
// var css90 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentages [ totch_90 > 9753918.2] {polygon-fill: #3a7922;}#pa_school_districts_2015_setpercentages [ totch_90 <= 9753918.2] {polygon-fill: #3a7922;}#pa_school_districts_2015_setpercentages [ totch_90 <= 2598258.3] {polygon-fill: #7eb669;}#pa_school_districts_2015_setpercentages [ totch_90 <= 988063.6] {polygon-fill: #abd69b;}#pa_school_districts_2015_setpercentages [ totch_90 = 0] {polygon-fill: #dcdcdc;}#pa_school_districts_2015_setpercentages [ totch_90 <= -586668.6] {polygon-fill: #9e91b1;}#pa_school_districts_2015_setpercentages [ totch_90 <= -1800703.0] {polygon-fill: #7b6a96;}#pa_school_districts_2015_setpercentages [ totch_90 <= -3229197.1] {polygon-fill: #5e497e;}";
// var css100 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentages [ totch_100 > 10938491] {polygon-fill: #3a7922;}#pa_school_districts_2015_setpercentages [ totch_100 <= 10938491] {polygon-fill: #3a7922;}#pa_school_districts_2015_setpercentages [ totch_100 <= 2901146] {polygon-fill: #7eb669;}#pa_school_districts_2015_setpercentages [ totch_100 <= 1096971] {polygon-fill: #abd69b;}#pa_school_districts_2015_setpercentages [ totch_100 = 0] {polygon-fill: #dcdcdc;}#pa_school_districts_2015_setpercentages [ totch_100 <= -656562.2] {polygon-fill: #9e91b1;}#pa_school_districts_2015_setpercentages [ totch_100 <= -2031493.1] {polygon-fill: #7b6a96;}#pa_school_districts_2015_setpercentages [ totch_100 <= -3628223.9] {polygon-fill: #5e497e;}";
//var css10 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentages [cartodb_id = "+polygon_id +"]{polygon-fill: #801515;}";
// var css598 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentages [ pup_5_98 <= 14576.07352] {polygon-fill: #005a32;}#pa_school_districts_2015_setpercentages [ pup_5_98 <= 6579.227088] {polygon-fill: #238443;}#pa_school_districts_2015_setpercentages [ pup_5_98 <= 5284.793336] {polygon-fill: #41ab5d;}#pa_school_districts_2015_setpercentages [ pup_5_98 <= 4356.608861] {polygon-fill: #74c476;}#pa_school_districts_2015_setpercentages [ pup_5_98 <= 3231.955197] {polygon-fill: #a1d99b;}#pa_school_districts_2015_setpercentages [ pup_5_98 <= 2467.423806] {polygon-fill: #c7e9c0;}#pa_school_districts_2015_setpercentages [ pup_5_98 <= 1514.405741] {polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css10 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentages [ pup_10 <= 14566.98671] {polygon-fill: #005a32;}#pa_school_districts_2015_setpercentages [ pup_10 <= 6459.844761] {polygon-fill: #238443;}#pa_school_districts_2015_setpercentages [ pup_10 <= 5250.593003] {polygon-fill: #41ab5d;}#pa_school_districts_2015_setpercentages [ pup_10 <= 4294.745324] {polygon-fill: #74c476;}#pa_school_districts_2015_setpercentages [ pup_10 <= 3228.629282] {polygon-fill: #a1d99b;}#pa_school_districts_2015_setpercentages [ pup_10 <= 2428.022701] {polygon-fill: #c7e9c0;}#pa_school_districts_2015_setpercentages [ pup_10 <= 1541.824299] {polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css20 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentages [ pup_20 <= 14544.3948] {polygon-fill: #005a32;}#pa_school_districts_2015_setpercentages [ pup_20 <= 6110.419566] {polygon-fill: #238443;}#pa_school_districts_2015_setpercentages [ pup_20 <= 5052.662696] {polygon-fill: #41ab5d;}#pa_school_districts_2015_setpercentages [ pup_20 <= 4141.301565] {polygon-fill: #74c476;}#pa_school_districts_2015_setpercentages [ pup_20 <= 3129.420455] {polygon-fill: #a1d99b;}#pa_school_districts_2015_setpercentages [ pup_20 <= 2410.791282] {polygon-fill: #c7e9c0;}#pa_school_districts_2015_setpercentages [ pup_20 <= 1609.616996] {polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css30 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentages [ pup_30 <= 14521.80289] {polygon-fill: #005a32;}#pa_school_districts_2015_setpercentages [ pup_30 <= 5876.176275] {polygon-fill: #238443;}#pa_school_districts_2015_setpercentages [ pup_30 <= 4809.473891] {polygon-fill: #41ab5d;}#pa_school_districts_2015_setpercentages [ pup_30 <= 3985.570937] {polygon-fill: #74c476;}#pa_school_districts_2015_setpercentages [ pup_30 <= 3034.686065] {polygon-fill: #a1d99b;}#pa_school_districts_2015_setpercentages [ pup_30 <= 2376.775883] {polygon-fill: #c7e9c0;}#pa_school_districts_2015_setpercentages [ pup_30 <= 1654.088816] {polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css40 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentages [ pup_40 <= 14499.21098] {polygon-fill: #005a32;}#pa_school_districts_2015_setpercentages [ pup_40 <= 5577.824777] {polygon-fill: #238443;}#pa_school_districts_2015_setpercentages [ pup_40 <= 4637.976434] {polygon-fill: #41ab5d;}#pa_school_districts_2015_setpercentages [ pup_40 <= 3858.930032] {polygon-fill: #74c476;}#pa_school_districts_2015_setpercentages [ pup_40 <= 2933.873272] {polygon-fill: #a1d99b;}#pa_school_districts_2015_setpercentages [ pup_40 <= 2391.733549] {polygon-fill: #c7e9c0;}#pa_school_districts_2015_setpercentages [ pup_40 <= 1689.5049] {polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css50 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentages [ pup_50 <= 14476.61907] {polygon-fill: #005a32;}#pa_school_districts_2015_setpercentages [ pup_50 <= 5263.713051] {polygon-fill: #238443;}#pa_school_districts_2015_setpercentages [ pup_50 <= 4387.86793] {polygon-fill: #41ab5d;}#pa_school_districts_2015_setpercentages [ pup_50 <= 3693.42644] {polygon-fill: #74c476;}#pa_school_districts_2015_setpercentages [ pup_50 <= 2902.675072] {polygon-fill: #a1d99b;}#pa_school_districts_2015_setpercentages [ pup_50 <= 2358.574871] {polygon-fill: #c7e9c0;}#pa_school_districts_2015_setpercentages [ pup_50 <= 1711.401278] {polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css60 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentages [ pup_60 <= 14454.02717] {polygon-fill: #005a32;}#pa_school_districts_2015_setpercentages [ pup_60 <= 5001.016039] {polygon-fill: #238443;}#pa_school_districts_2015_setpercentages [ pup_60 <= 4145.267943] {polygon-fill: #41ab5d;}#pa_school_districts_2015_setpercentages [ pup_60 <= 3527.922849] {polygon-fill: #74c476;}#pa_school_districts_2015_setpercentages [ pup_60 <= 2782.865897] {polygon-fill: #a1d99b;}#pa_school_districts_2015_setpercentages [ pup_60 <= 2327.914151] {polygon-fill: #c7e9c0;}#pa_school_districts_2015_setpercentages [ pup_60 <= 1746.591942] {polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css70 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentages [ pup_70 <= 14431.43526] {polygon-fill: #005a32;}#pa_school_districts_2015_setpercentages [ pup_70 <= 4781.089301] {polygon-fill: #238443;}#pa_school_districts_2015_setpercentages [ pup_70 <= 3953.039966] {polygon-fill: #41ab5d;}#pa_school_districts_2015_setpercentages [ pup_70 <= 3353.219259] {polygon-fill: #74c476;}#pa_school_districts_2015_setpercentages [ pup_70 <= 2709.222635] {polygon-fill: #a1d99b;}#pa_school_districts_2015_setpercentages [ pup_70 <= 2269.738181] {polygon-fill: #c7e9c0;}#pa_school_districts_2015_setpercentages [ pup_70 <= 1770.984147] {polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css80 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentages [ pup_80 <= 14408.84335] {polygon-fill: #005a32;}#pa_school_districts_2015_setpercentages [ pup_80 <= 4564.628885] {polygon-fill: #238443;}#pa_school_districts_2015_setpercentages [ pup_80 <= 3713.984308] {polygon-fill: #41ab5d;}#pa_school_districts_2015_setpercentages [ pup_80 <= 3152.125264] {polygon-fill: #74c476;}#pa_school_districts_2015_setpercentages [ pup_80 <= 2624.537296] {polygon-fill: #a1d99b;}#pa_school_districts_2015_setpercentages [ pup_80 <= 2179.641673] {polygon-fill: #c7e9c0;}#pa_school_districts_2015_setpercentages [ pup_80 <= 1752.52811] {polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css90 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentages [ pup_90 <= 14386.25144] {polygon-fill: #005a32;}#pa_school_districts_2015_setpercentages [ pup_90 <= 4341.393053] {polygon-fill: #238443;}#pa_school_districts_2015_setpercentages [ pup_90 <= 3525.859394] {polygon-fill: #41ab5d;}#pa_school_districts_2015_setpercentages [ pup_90 <= 2938.799505] {polygon-fill: #74c476;}#pa_school_districts_2015_setpercentages [ pup_90 <= 2509.557956] {polygon-fill: #a1d99b;}#pa_school_districts_2015_setpercentages [ pup_90 <= 2108.640131] {polygon-fill: #c7e9c0;}#pa_school_districts_2015_setpercentages [ pup_90 <= 1710.650477] {polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css100 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentages [ pup_100 <= 14363.65953] {polygon-fill: #005a32;}#pa_school_districts_2015_setpercentages [ pup_100 <= 4196.784022] {polygon-fill: #238443;}#pa_school_districts_2015_setpercentages [ pup_100 <= 3335.143337] {polygon-fill: #41ab5d;}#pa_school_districts_2015_setpercentages [ pup_100 <= 2735.403977] {polygon-fill: #74c476;}#pa_school_districts_2015_setpercentages [ pup_100 <= 2372.889268] {polygon-fill: #a1d99b;}#pa_school_districts_2015_setpercentages [ pup_100 <= 1998.572901] {polygon-fill: #c7e9c0;}#pa_school_districts_2015_setpercentages [ pup_100 <= 1632.381369] {polygon-fill: #edf8e9;line-color: #D1D2D1;}";

//var css598 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_5_98 <= 14576.073520] {polygon-fill: #005a32;}#pa_school_districts_2015_setpercentages [ pup_5_98 <= 7277.817284] {polygon-fill: #238443;}#pa_school_districts_2015_setpercentages [ pup_5_98 <= 5408.867460] {polygon-fill: #41ab5d;}#pa_school_districts_2015_setpercentages [ pup_5_98 <= 3745.844934] {polygon-fill: #74c476;}#pa_school_districts_2015_setpercentages [ pup_5_98 <= 2119.610853]";

//NATURAL BREAKS, different from all percentages
// var css598 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_5_98 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_5_98 <= 7277.817284] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_5_98 <= 5408.867460] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_5_98 <= 3745.844934] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_5_98 <= 2119.610853]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css10 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_10 <= 14566.986710] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_10 <= 7102.665945] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_10 <= 5355.006426] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_10 <= 3668.990560] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_10 <= 2100.033861]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css20 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_20 <= 14544.394800] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_20 <= 6865.648673] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_20 <= 5078.650130] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_20 <= 3525.754803] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_20 <= 2051.360938]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css30 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_30 <= 14521.802890] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_30 <= 6824.716669] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_30 <= 5072.827467] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_30 <= 3551.030865] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_30 <= 2090.736131]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css40 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_40 <= 14499.210980] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_40 <= 6968.104858] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_40 <= 4968.374317] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_40 <= 3479.343965] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_40 <= 2079.980180]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css50 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_50 <= 14476.619070] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_50 <= 7618.667231] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_50 <= 5154.951996] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_50 <= 3528.022473] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_50 <= 2146.810430]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css60 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_60 <= 14454.027170] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_60 <= 8190.958603] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_60 <= 5072.318606] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_60 <= 3452.864573] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_60 <= 2142.732582]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css70 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_70 <= 14431.435260] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_70 <= 7119.714340] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_70 <= 4682.770282] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_70 <= 3247.745312] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_70 <= 2095.159146]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css80 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_80 <= 14408.843350] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_80 <= 7109.954590] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_80 <= 4417.629637] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_80 <= 3091.774707] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_80 <= 2025.593706]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css90 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_90 <= 14386.251440] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_90 <= 6461.382295] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_90 <= 4036.515195] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_90 <= 2908.819584] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_90 <= 1923.037382]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css100 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_100 <= 14363.659530] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_100 <= 5756.951173] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_100 <= 4026.933007] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_100 <= 2940.356478] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_100 <= 1998.572901]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";

//NATURAL BREAKS from 5.98, same for all percentages
// var css598 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_5_98 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_5_98 <= 7277.817284] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_5_98 <= 5408.867460] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_5_98 <= 3745.844934] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_5_98 <= 2119.610853]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css10 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_10 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_10 <= 7277.817284] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_10 <= 5408.867460] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_10 <= 3745.844934] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_10 <= 2119.610853]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css20 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_20 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_20 <= 7277.817284] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_20 <= 5408.867460] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_20 <= 3745.844934] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_20 <= 2119.610853]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css30 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_30 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_30 <= 7277.817284] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_30 <= 5408.867460] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_30 <= 3745.844934] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_30 <= 2119.610853]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css40 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_40 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_40 <= 7277.817284] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_40 <= 5408.867460] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_40 <= 3745.844934] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_40 <= 2119.610853]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css50 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_50 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_50 <= 7277.817284] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_50 <= 5408.867460] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_50 <= 3745.844934] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_50 <= 2119.610853]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css60 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_60 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_60 <= 7277.817284] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_60 <= 5408.867460] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_60 <= 3745.844934] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_60 <= 2119.610853]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css70 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_70 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_70 <= 7277.817284] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_70 <= 5408.867460] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_70 <= 3745.844934] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_70 <= 2119.610853]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css80 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_80 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_80 <= 7277.817284] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_80 <= 5408.867460] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_80 <= 3745.844934] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_80 <= 2119.610853]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css90 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_90 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_90 <= 7277.817284] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_90 <= 5408.867460] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_90 <= 3745.844934] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_90 <= 2119.610853]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css100 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_100 <= 14576.073520 {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_100 <= 7277.817284] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_100 <= 5408.867460] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_100 <= 3745.844934] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_100 <= 2119.610853]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";

//EQUAL INTERVALS from 5.98, same for all percentages
// var css598 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_5_98 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_5_98 <= 11757.546297] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_5_98 <= 8939.019074] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_5_98 <= 6120.491851] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_5_98 <= 3301.964629]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css10 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_10 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_10 <= 11757.546297] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_10 <= 8939.019074] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_10 <= 6120.491851] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_10 <= 3301.964629]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css20 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_20 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_20 <= 11757.546297] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_20 <= 8939.019074] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_20 <= 6120.491851] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_20 <= 3301.964629]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css30 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_30 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_30 <= 11757.546297] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_30 <= 8939.019074] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_30 <= 6120.491851] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_30 <= 3301.964629]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css40 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_40 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_40 <= 11757.546297] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_40 <= 8939.019074] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_40 <= 6120.491851] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_40 <= 3301.964629]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css50 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_50 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_50 <= 11757.546297] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_50 <= 8939.019074] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_50 <= 6120.491851] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_50 <= 3301.964629]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css60 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_60 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_60 <= 11757.546297] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_60 <= 8939.019074] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_60 <= 6120.491851] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_60 <= 3301.964629]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css70 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_70 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_70 <= 11757.546297] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_70 <= 8939.019074] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_70 <= 6120.491851] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_70 <= 3301.964629]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css80 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_80 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_80 <= 11757.546297] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_80 <= 8939.019074] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_80 <= 6120.491851] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_80 <= 3301.964629]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css90 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_90 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_90 <= 11757.546297] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_90 <= 8939.019074] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_90 <= 6120.491851] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_90 <= 3301.964629]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
// var css100 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_100 <= 14576.073520 {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_100 <= 11757.546297] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_100 <= 8939.019074] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_100 <= 6120.491851] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_100 <= 3301.964629]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";

//QUANTILE INTERVALS from 5.98, same for all percentages
var css598 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_5_98 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_5_98 <= 5995.790102] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_5_98 <= 4491.090421] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_5_98 <= 3055.448955] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_5_98 <= 1961.998050]{polygon-fill: #E1F6D9;line-color: #D1D2D1;}";
var css10 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_10 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_10 <= 5995.790102] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_10 <= 4491.090421] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_10 <= 3055.448955] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_10 <= 1961.998050]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
var css20 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_20 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_20 <= 5995.790102] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_20 <= 4491.090421] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_20 <= 3055.448955] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_20 <= 1961.998050]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
var css30 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_30 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_30 <= 5995.790102] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_30 <= 4491.090421] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_30 <= 3055.448955] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_30 <= 1961.998050]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
var css40 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_40 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_40 <= 5995.790102] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_40 <= 4491.090421] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_40 <= 3055.448955] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_40 <= 1961.998050]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
var css50 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_50 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_50 <= 5995.790102] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_50 <= 4491.090421] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_50 <= 3055.448955] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_50 <= 1961.998050]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
var css60 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_60 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_60 <= 5995.790102] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_60 <= 4491.090421] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_60 <= 3055.448955] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_60 <= 1961.998050]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
var css70 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_70 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_70 <= 5995.790102] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_70 <= 4491.090421] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_70 <= 3055.448955] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_70 <= 1961.998050]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
var css80 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_80 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_80 <= 5995.790102] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_80 <= 4491.090421] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_80 <= 3055.448955] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_80 <= 1961.998050]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
var css90 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_90 <= 14576.073520] {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_90 <= 5995.790102] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_90 <= 4491.090421] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_90 <= 3055.448955] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_90 <= 1961.998050]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";
var css100 = "#pa_school_districts_2015_setpercentages{polygon-fill: #FFFFCC;polygon-opacity: 0.8;line-color: #FFF;line-width: 0.5;line-opacity: 1;}#pa_school_districts_2015_setpercentage [ pup_100 <= 14576.073520 {polygon-fill: #006d2c;}#pa_school_districts_2015_setpercentages [ pup_100 <= 5995.790102] {polygon-fill: #31a354;}#pa_school_districts_2015_setpercentages [ pup_100 <= 4491.090421] {polygon-fill:#74c476;}#pa_school_districts_2015_setpercentages [ pup_100 <= 3055.448955] {polygon-fill: #bae4b3;}#pa_school_districts_2015_setpercentages [ pup_100 <= 1961.998050]{polygon-fill: #edf8e9;line-color: #D1D2D1;}";





function removeTip (x, y, val1, val2, val3){
  $('.cartodb-tooltip').remove();
  $('#infowindow_template').hide();
  $('#infowindow_template').empty();
  $('#infowindow_template').append('<div class="hello"><div class="tip_container"><h4>{{name}}</h4><h4>Total State Funding</h4><p>${{'+ val1 +'}}<p><h4>State Funding per Pupil</h4><p>${{'+ val2 +'}}<p><h4>Funding Rank</h4><p>{{'+ val3 +'}} out of 500<p><div class="tipCircle"></div><h4>Median Household Income</h4><p><font color={{color}}>{{hh_order}}</font> ${{smed_hh}}</p></div></div>');
  x.setCartoCSS(y);
}

function slideCSS(d, x){
return d == 5.98   ? removeTip(x, css598, 'stot_5_98', 'spup_5_98', 'rank_5_98') :
  d == 10   ?   removeTip(x, css10, 'stot_10', 'spup_10', 'rank_10'):
  d == 20   ?   removeTip(x, css20, 'stot_20', 'spup_20', 'rank_20') :
  d == 30   ?   removeTip(x, css30, 'stot_30', 'spup_30', 'rank_30') :
  d == 40   ?   removeTip(x, css40, 'stot_40', 'spup_40', 'rank_40') :
  d == 50   ?   removeTip(x, css50, 'stot_50', 'spup_50', 'rank_50') :
  d == 60   ?   removeTip(x, css60, 'stot_60', 'spup_60', 'rank_60') :
  d == 70   ?   removeTip(x, css70, 'stot_70', 'spup_70', 'rank_70') :
  d == 80   ?   removeTip(x, css80, 'stot_80', 'spup_80', 'rank_80') :
  d == 90   ?   removeTip(x, css90, 'stot_90', 'spup_90', 'rank_90') :
  d == 100  ?   removeTip(x, css100, 'stot_100', 'spup_100', 'rank_100'):
               removeTip(x, css598, 'stot_5_98', 'spup_5_98', 'rank_5_98');
}



var map = new L.Map('map', {
  zoomControl: false,
  center: [40.972845, -77.749573],
  zoom: 8
});


function main() {


L.tileLayer('http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png', {
    attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
    subdomains: 'abcd',
  }).addTo(map);

function slideFunc(theLayer, thefunc, theID){
  $('.nstSlider').nstSlider({
      "left_grip_selector": ".leftGrip",
      "rounding": {
      "5.98": "10",
       "10": "20",
       "20": "30",
       "30": "40",
       "40": "50",
       "50": "60",
       "60": "70",
       "70": "80",
       "80": "90",
       "90": "100",
       "100": "110"
   },
      "value_changed_callback": function(cause, leftValue, rightValue) {
          $(this).parent().find('.percLabel').text(leftValue+"%");
          value = leftValue;
          slideCSS(value, theLayer);
          thefunc();
          // hov(theLayer);
      }
  });
}



  //Change your viz.json below
          cartodb.createVis('map', url_example, {
            search: false,
            tiles_loader: true,
            layer_selector: false,
            https: true,
            scrollwheel: true,

          })
          .done(function(vis, layers) {

            //getting the data layer
            layer = layers[1];
            dataLayer = layers[1].getSubLayer(0);

            dataLayer.set({ 'interactivity': ['cartodb_id', 'name', 'stot_5_98', 'stot_10', 'stot_20', 'stot_30', 'stot_40', 'stot_50', 'stot_60', 'stot_70', 'stot_80', 'stot_90', 'stot_100', 'spup_5_98', 'spup_10', 'spup_20', 'spup_30', 'spup_40', 'spup_50', 'spup_60', 'spup_70', 'spup_80', 'spup_90', 'spup_100', 'rank_5_98', 'rank_10', 'rank_20', 'rank_30', 'rank_40', 'rank_50', 'rank_60', 'rank_70', 'rank_80', 'rank_90', 'rank_100', 'smed_hh', 'med_hh_ran', 'color', 'hh_order']});

          function tip(){
            tooltip = vis.addOverlay({
              type: 'tooltip',
              template: $('#infowindow_template').html(),
             fields: [{ name: 'name', totch_90: 'totch_90'}],
            });

          }
           //Apply a CartoCSS for that layer
           tip();
           slideFunc(dataLayer, tip);

          })
          .error(function(err) {
            console.log(err);
          });

}

// you could use $(window).load(main);
window.onload = main;
